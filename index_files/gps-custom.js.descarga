$(document).ready(function(){var Cookies2=Cookies.noConflict();document.addEventListener("lazybeforeunveil",function(e){e.target.parentElement.setAttribute("class",e.target.parentElement.getAttribute("class")+" child-image-loaded ")}),$(window).load(function(){$(".shopify-challenge__container .shopify-challenge__message").length&&$("html, body").animate({scrollTop:0},"fast")});function handleError(XMLHttpRequest){var data=eval("("+XMLHttpRequest.responseText+")"),errorMessage="";data.message?errorMessage=data.description:errorMessage="Error : "+Shopify.fullMessagesFromErrors(data).join("; ")+".",errorMessage!=""&&($("#gp-popup-addtocart-error .popup__column").html(errorMessage),$.magnificPopup.open({items:{src:"#gp-popup-addtocart-error"},type:"inline",mainClass:"modal_addtocart_popup mfp-fade",removalDelay:300}))}if($(document).on("click",".newsletter-link .newsletter-action",function(e){e.preventDefault(),$.magnificPopup.open({items:{src:"#newsletter-popup"},type:"inline",removalDelay:300,mainClass:"modal_newsletter_popup mfp-fade no_checkbox"})}),$("#header.sticky-header").length){var headerHeight=$(".sticky-header .site-header").height();$(".sticky-header #pd-sticky").height(headerHeight),$(window).resize(function(){setTimeout(function(){var headerHeight2=$(".sticky-header .site-header").height();$(".sticky-header #pd-sticky").height(headerHeight2)},200)})}if($("#header.sticky-header-mobile").length){var headerHeightMobile=$(".sticky-header-mobile .site-header").height();$(".sticky-header-mobile #pd-sticky-mobile").height(headerHeightMobile),$(window).resize(function(){setTimeout(function(){var headerHeightMobile2=$(".sticky-header-mobile .site-header").height();$(".sticky-header-mobile #pd-sticky-mobile").height(headerHeightMobile2)},200)})}if($("#header.sticky-header").length||$("#header.sticky-header-mobile").length){var lastScrollTop=0,navbarHeight=$("#header").outerHeight();$(window).scroll(function(event){if(!$(".header-cart").hasClass("active")&&!$("html").hasClass("nav-open")&&!$("html").hasClass("nav-open-additional-menu")){var st=$(this).scrollTop();st>lastScrollTop&&st>navbarHeight?$("#header").removeClass("nav-down").addClass("nav-up"):(st>navbarHeight&&st+$(window).height()<$(document).height()&&$("#header").removeClass("nav-up").addClass("nav-down"),st==0&&$("#header").removeClass("nav-up").removeClass("nav-down")),lastScrollTop=st}})}$(document).on("click","#header .toggle_menu_mobile",function(){$("html").toggleClass("nav-open")}),$(document).on("click touch",".slideout-menu #mobile_navigation_menu .site-nav .toggle-menu",function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).next().slideToggle()}),$(document).on("click",".slideout-menu .slm-tab-title li a",function(e){if(e.preventDefault(),!$(this).hasClass("active")){$(".slideout-menu .slm-tab-title li a").removeClass("active"),$(this).addClass("active");var id=$(this).attr("href");$(".slideout-menu .slm-tab-content .tab-content").removeClass("active"),$(id).addClass("active")}}),$(document).on("click",".toggle-desktop-additional-menu",function(){$("html").toggleClass("nav-open-additional-menu")});function refreshMiniCart(lineitem,quantity){$("body").hasClass("template-cart")?window.location.reload():$.ajax({method:"GET",url:"/cart",data:{view:"ajax"},xhrFields:{withCredentials:!0},dataType:"html",success:function(response){console.log(response);var headerCartHtml=$(response).find(".header-cart .action-cart").first().html(),contentCartHtml=$(response).find(".header-cart .minicart-content").first().html(),subtotal=$(response).find(".header-cart .minicart-content .subtotal .subtotal-price").first().html();$(response).find(".header-cart.empty").length?$(".header-cart").addClass("empty"):$(".header-cart").removeClass("empty"),headerCartHtml&&$(".header-cart .action-cart").html(headerCartHtml),contentCartHtml&&$(".header-cart .minicart-content").html(contentCartHtml),lineitem&&(quantity?(console.log(quantity),showSuccessAddToCartPopup(lineitem,quantity,subtotal)):showSuccessAddToCartPopup(lineitem,1,subtotal))}})}$(document).ready(function(){$(document).on("keyup change",".minicart-content .details-qty input",function(){var currentQty=$(this).val();currentQty&&currentQty!=$(this).data("item-qty")?$(this).next().show():$(this).next().hide()}),$(document).on("click",".minicart-content .update-cart-item",function(){var id=$(this).data("cart-item"),quantity=$('.minicart-content .details-qty input[data-cart-item="'+id+'"]').val(),oldQuantity=$('.minicart-content .details-qty input[data-cart-item="'+id+'"]').data("item-qty");quantity&&id&&($(".header-cart .minicart-content .ajax-loader").show(),$.ajax({method:"POST",url:"/cart/update.js",data:"updates["+id+"]="+quantity,dataType:"json",success:function(response){refreshMiniCart()},error:function(XMLHttpRequest2,textStatus){$(".header-cart .minicart-content .ajax-loader").hide(),handleError(XMLHttpRequest2)}}))}),$(document).on("click",".minicart-content .action.delete",function(){var id=$(this).data("cart-item");id&&($(".header-cart .minicart-content .ajax-loader").show(),$.ajax({method:"POST",url:"/cart/update.js",data:"updates["+id+"]=0",dataType:"json",success:function(response){refreshMiniCart()},error:function(XMLHttpRequest2,textStatus){$(".header-cart .minicart-content .ajax-loader").hide(),handleError(XMLHttpRequest2)}}))}),$(document).on("click",".header-cart.toggle-cart-slide .action-cart",function(e){e.preventDefault(),$(".header-cart.toggle-cart-slide").toggleClass("active")}),$(document).on("click",".header-cart.toggle-cart-dropdown .action-cart",function(e){e.preventDefault(),$(".header-cart.toggle-cart-dropdown").toggleClass("active")}),$(document).on("click",function(e){var container=$(".header-cart.toggle-cart-slide .minicart-content"),container2=$(".header-cart.toggle-cart-slide .action-cart");!container.is(e.target)&&container.has(e.target).length===0&&!container2.is(e.target)&&container2.has(e.target).length===0&&$(".header-cart.toggle-cart-slide").removeClass("active")}),$(document).on("click",function(e){var container=$(".header-cart.toggle-cart-dropdown .minicart-content"),container2=$(".header-cart.toggle-cart-dropdown .action-cart");!container.is(e.target)&&container.has(e.target).length===0&&!container2.is(e.target)&&container2.has(e.target).length===0&&$(".header-cart.toggle-cart-dropdown").removeClass("active")}),$(document).on("click",".header-cart .btn-minicart-close",function(){$(".header-cart.toggle-cart-slide").removeClass("active")});function calcMaxHeightCartContent(){var windowHeight=$(window).height(),headerHeight2=$(".site-header").height(),maxHeightDropdownContent=windowHeight-headerHeight2-201,maxHeightSlideoutContent=windowHeight-211;maxHeightDropdownContent>20&&maxHeightDropdownContent<318?$(".header-cart .minicart-content.cart-dropdown .minicart-items-wrapper").css("max-height",maxHeightDropdownContent):$(".header-cart .minicart-content.cart-dropdown .minicart-items-wrapper").css("max-height",""),maxHeightSlideoutContent>20?$(".header-cart .minicart-content.cart-slideout .minicart-items-wrapper").css("max-height",maxHeightSlideoutContent):$(".header-cart .minicart-content.cart-slideout .minicart-items-wrapper").css("max-height","")}calcMaxHeightCartContent(),$(window).on("resize",function(){setTimeout(function(){calcMaxHeightCartContent()},300)})});function showSuccessAddToCartPopup(lineitem,quantity,subtotal){if(lineitem){let calculatePercent2=function(amount,percent){const amountDecimals=getNumberOfDecimals2(amount),percentDecimals=getNumberOfDecimals2(percent),amountAsInteger=Math.round(amount+`e${amountDecimals}`),percentAsInteger=Math.round(percent+`e${percentDecimals}`),precisionCorrection=`e-${amountDecimals+percentDecimals+2}`;return Number(amountAsInteger*percentAsInteger+precisionCorrection)},getNumberOfDecimals2=function(number){const decimals=parseFloat(number).toString().split(".")[1];return decimals?decimals.length:0};var calculatePercent=calculatePercent2,getNumberOfDecimals=getNumberOfDecimals2,pSinglePrice=lineitem.final_price,pConvertPrice=parseFloat(Math.round(parseFloat(pSinglePrice*100).toFixed(2))/1e4).toFixed(2),pTotalPrice=parseFloat(pConvertPrice*quantity).toFixed(2),pName=lineitem.title,pImage=lineitem.image;$("#gp-popup-addtocart .single-price").text("$ "+pTotalPrice),$("#gp-popup-addtocart .product-confirm-name").text(pName),$("#gp-popup-addtocart .popup__image-wrapper").html('<img src="'+pImage+'" />'),$("#gp-popup-addtocart .product-confirm-subtotal .price").html(subtotal),$("#gp-popup-addtocart .product-confirm-qty .value").text(quantity);var itemText=$("#gp-popup-addtocart .ajax_header .one-item-text").text();if(lineitem.title=="Kit Ag\xE1rica / Buna"){let pop_porcent=calculatePercent2(pTotalPrice,25);console.log(pop_porcent)}console.log(lineitem.final_price),console.log(lineitem),quantity>1&&(itemText=$("#gp-popup-addtocart .ajax_header .other-item-text").text()),$("#gp-popup-addtocart .ajax_header .item-added-to-cart").text(quantity+" "+itemText),$.magnificPopup.open({items:{src:"#gp-popup-addtocart"},type:"inline",mainClass:"modal_addtocart_popup mfp-fade",removalDelay:300})}}$(document).on("click","#gp-popup-addtocart .btn-close",function(e){e.preventDefault(),$("#gp-popup-addtocart .mfp-close").trigger("click")}),$(document).on("click",".btn-add-to-cart",function(e){e.preventDefault();var btn=$(this),vId=btn.data("vid"),form=btn.closest("form"),qty=$(this).parents(".product-item-details").find(".qty-input").val();console.log(qty);var $properties=form.find('[name^="properties"]'),properties={};$($properties).each(function(index,el){var name=$(el).attr("name").substr(11,$(el).attr("name").length-12);properties[name]=$(el).val()}),btn.addClass("ajax-loader-btn");var data2={quantity:qty,id:vId,properties};console.log("optional click cart -->"+vId),$.ajax({type:"POST",url:"/cart/add.js",data:data2,dataType:"json",xhrFields:{withCredentials:!0},success:function(lineitem){btn.removeClass("ajax-loader-btn"),refreshMiniCart(lineitem,qty)},error:function(XMLHttpRequest2,textStatus){btn.removeClass("ajax-loader-btn"),handleError(XMLHttpRequest2)}})}),$(document).on("click",".btn-add-to-cart--suscription",function(e){e.preventDefault();var btn=$(this),vId=btn.data("vid"),form=btn.closest("form"),qty=$("#pass-qty-product").val();console.log(btn,vId,form,qty);var $properties=form.find('[name^="properties"]'),properties={};$($properties).each(function(index,el){var name=$(el).attr("name").substr(11,$(el).attr("name").length-12);properties[name]=$(el).val()}),btn.addClass("ajax-loader-btn");var data2={quantity:qty,id:vId,properties};console.log("optional click cart -->"+vId),$.ajax({type:"POST",url:"/cart/add.js",data:data2,dataType:"json",xhrFields:{withCredentials:!0},success:function(lineitem){btn.removeClass("ajax-loader-btn"),refreshMiniCart(lineitem,1),console.log(refreshMiniCart(lineitem,qty))},error:function(XMLHttpRequest2,textStatus){btn.removeClass("ajax-loader-btn"),handleError(XMLHttpRequest2)}})}),$(document).on("click",".btn-add-to-cart--suscription-extra-miel",function(e){e.preventDefault();var btn=$(this),vId=btn.data("vid"),form=btn.closest("form"),qty=$("#pass-qty-miel").val();console.log(btn,vId,form,qty);var $properties=form.find('[name^="properties"]'),properties={};$($properties).each(function(index,el){var name=$(el).attr("name").substr(11,$(el).attr("name").length-12);properties[name]=$(el).val()}),btn.addClass("ajax-loader-btn");var data2={quantity:qty,id:vId,properties};console.log("optional click cart -->"+vId),$.ajax({type:"POST",url:"/cart/add.js",data:data2,dataType:"json",xhrFields:{withCredentials:!0},success:function(lineitem){btn.removeClass("ajax-loader-btn"),refreshMiniCart(lineitem,1),console.log(refreshMiniCart(lineitem,qty))},error:function(XMLHttpRequest2,textStatus){btn.removeClass("ajax-loader-btn"),handleError(XMLHttpRequest2)}})}),$(document).on("click",".btn-add-to-cart--suscription-extra-chocolate",function(e){e.preventDefault();var btn=$(this),vId=btn.data("vid"),form=btn.closest("form"),qty=$("#pass-qty-chocolate").val();console.log(btn,vId,form,qty);var $properties=form.find('[name^="properties"]'),properties={};$($properties).each(function(index,el){var name=$(el).attr("name").substr(11,$(el).attr("name").length-12);properties[name]=$(el).val()}),btn.addClass("ajax-loader-btn");var data2={quantity:qty,id:vId,properties};console.log("optional click cart -->"+vId),$.ajax({type:"POST",url:"/cart/add.js",data:data2,dataType:"json",xhrFields:{withCredentials:!0},success:function(lineitem){btn.removeClass("ajax-loader-btn"),refreshMiniCart(lineitem,1),console.log(refreshMiniCart(lineitem,qty))},error:function(XMLHttpRequest2,textStatus){btn.removeClass("ajax-loader-btn"),handleError(XMLHttpRequest2)}})}),$(document).on("click",".btn-add-to-cart-product-page",function(e){console.log("click--> add to cart"),e.preventDefault();var btn=$(this),form=btn.closest("form");console.log(form);var vId=form.find("select.product-form__variants").first().val(),qty=form.find(".gp-product-qty input.qty-input").first().val(),$properties=form.find('[name^="properties"]');console.log($properties);var properties={};$($properties).each(function(index,el){var name=$(el).attr("name").substr(11,$(el).attr("name").length-12);properties[name]=$(el).val()});var data2={quantity:qty,id:vId,properties};vId&&qty&&(btn.addClass("ajax-loader-btn"),$.ajax({type:"POST",url:"/cart/add.js",data:data2,dataType:"json",xhrFields:{withCredentials:!0},success:function(lineitem){btn.removeClass("ajax-loader-btn"),refreshMiniCart(lineitem,qty),console.log(refreshMiniCart(lineitem,qty))},error:function(XMLHttpRequest2,textStatus){btn.removeClass("ajax-loader-btn"),handleError(XMLHttpRequest2)}}))}),$(document).on("change","form.product-form-quickview select.single-option-selector-quickview",function(){var val="";$("form.product-form-quickview select.single-option-selector-quickview").each(function(){val==""?val+=$(this).val():val+=" / "+$(this).val()}),val!=""&&$("form.product-form-quickview select#ProductSelect-quickview option").each(function(){if(val==$(this).text().trim()){var optionValue=$(this).val();$(".js-get-vid").attr("data-vid",optionValue),$("form.product-form-quickview select#ProductSelect-quickview").val(optionValue).change(),console.log(optionValue);var vPrice=parseInt($(this).data("price")),vComparePrice=parseInt($(this).data("compare-at-price")),priceHtml="";vComparePrice>vPrice?priceHtml='<dl class="price price--on-sale" data-price=""><div class="price__regular"><dt><span class="visually-hidden visually-hidden--inline">Regular price</span></dt><dd><span class="price-item price-item--regular" data-regular-price=""><span class="money">'+Shopify.formatMoney(vComparePrice)+'</span></span></dd></div><div class="price__sale"><dt><span class="visually-hidden visually-hidden--inline">Sale price</span></dt><dd><span class="price-item price-item--sale" data-sale-price=""><span class="money">'+Shopify.formatMoney(vPrice)+'</span></span><span class="price-item__label" aria-hidden="true">Sale</span></dd></div></dl>':priceHtml='<dl class="price" data-price=""><div class="price__regular"><dt><span class="visually-hidden visually-hidden--inline">Regular price</span></dt><dd><span class="price-item price-item--regular" data-regular-price=""><span class="money">'+Shopify.formatMoney(vPrice)+'</span></span></dd></div><div class="price__sale"><dt><span class="visually-hidden visually-hidden--inline">Sale price</span></dt><dd><span class="price-item price-item--sale" data-sale-price=""><span class="money">'+Shopify.formatMoney(vPrice)+'</span></span><span class="price-item__label" aria-hidden="true">Sale</span></dd></div></dl>',priceHtml!=""&&$("#gp-popup-quickview .product-info-price").html(priceHtml);var addToCartBtn=$(".product-form-quickview .btn-add-to-cart-product-page"),soldOutBtnText=addToCartBtn.data("text-soldout"),addToCartBtnText=addToCartBtn.data("text-add-to-cart");$(this).prop("disabled")?(addToCartBtn.prop("disabled",!0),soldOutBtnText&&soldOutBtnText!=""&&addToCartBtn.find("span").text(soldOutBtnText)):(addToCartBtn.prop("disabled",!1),addToCartBtnText&&addToCartBtnText!=""&&addToCartBtn.find("span").text(addToCartBtnText))}})});function initQuickviewJs(){if($("#gp-popup-quickview .quickview-popup-content .owl-carousel").owlCarousel({items:1,nav:!1,dots:!1,loop:!1,rewind:!1,lazyLoad:!0,touchDrag:!1,mouseDrag:!1,navText:['<i class="ti-angle-left"></i>','<i class="ti-angle-right"></i>']}),$("#gp-popup-quickview").addClass("loaded"),$(".product-form-quickview #SingleOptionSelector-0").val()==="Compra \xFAnica"||$(".product-form-quickview #SingleOptionSelector-0").val()==="Suscripci\xF3n"){$(".product-form-quickview .block-pay").addClass("block--recurrency");var suscriptionRoute=function(){const customerId=$("#userId").val()||"",elementsInCar=$(".js-get-vid"),recurrencia=$("#propertie-hide-value").val(),quantity=Number($(".qty-input").val()||0),order={customer:{id:customerId},line_items:[]};for(let i2=0;i2<elementsInCar.length;i2++){console.log($(elementsInCar[i2]).data());const productData=$(elementsInCar[i2]).data();if("vid"in productData&&productData.vid!==""){const lineItem={product_id:productData.pid,variant_id:productData.vid,quantity:productData.name==="miel"?miel:productData.name==="chocolate"?chocolate:quantity,properties:[{name:"recurrencia",value:recurrencia}]};order.line_items.push(lineItem)}}console.log("elementsInCar",{elementsInCar,order}),order.line_items.length&&(customerId?($(".loader-block").addClass("active"),$(".loader-block").fadeIn(),callCheckout(order)):(localStorage.removeItem("suscribeOrder"),localStorage.setItem("suscribeOrder",JSON.stringify(order)),window.location.href="/account/login?return_url=%2Fpages%2Fcrear-suscripcion"))};$(".js-click-suscription-route").click(suscriptionRoute)}else $(".product-form-quickview .block-pay").remove();function disccount(){function calculatePercent(amount,percent){const amountDecimals=getNumberOfDecimals(amount),percentDecimals=getNumberOfDecimals(percent),amountAsInteger=Math.round(amount+`e${amountDecimals}`),percentAsInteger=Math.round(percent+`e${percentDecimals}`),precisionCorrection=`e-${amountDecimals+percentDecimals+2}`;return Number(amountAsInteger*percentAsInteger+precisionCorrection)}function getNumberOfDecimals(number){const decimals=parseFloat(number).toString().split(".")[1];return decimals?decimals.length:0}setTimeout(function(){var wrappPrice=$(".quickview-popup-content .price__regular"),original=$(".quickview-popup-content .price__regular .price-item"),totalPrice=original.text().replace("$",""),cleanPrice=totalPrice.replace(/\s/g,"");$(".price-item").attr("data-total",cleanPrice),console.log(cleanPrice);var sumaTotal=cleanPrice-calculatePercent(cleanPrice,15);wrappPrice.addClass("hide"),$(".quickview-popup-content .price").append('<div class="price-add"><p class="price-item price--offer">'+parseFloat(sumaTotal).toFixed(2)+" <span>"+cleanPrice+'</span></p><p class="price--label">Descuento del 15%</p></div>')},500)}function disccountRemove(){var wrappPrice=$(".quickview-popup-content .price__regular");wrappPrice.removeClass("hide"),$(".price-add").remove()}$(".block-limited").size()>0&&($("#SingleOptionSelector-0").addClass("disabled"),$("#SingleOptionSelector-0 option:nth-child(2)").remove(),$("#SingleOptionSelector-2 option:nth-child(2)").prop("selected",!0).trigger("change"));var optionSelection=function(){var val=$(this).val();val==="Compra \xFAnica"?($(".product-form-quickview  .suscription-hide").hide(),$(".product-form-quickview #0semanas").trigger("click"),$(".product-form-quickview #2semanas").prop("checked",!1),$(".product-form__item").removeClass("product-form--suscription-plan"),disccountRemove()):val==="Suscripci\xF3n"&&($(".product-form-quickview .suscription-hide").show(),$(".product-form-quickview #2semanas").trigger("click"),$(".product-form-quickview #0semanas").prop("checked",!1),$(".product-form-quickview #2semanas").prop("checked",!0),$(".product-form__item").addClass("product-form--suscription-plan"),disccount())};$(".product-form-quickview #SingleOptionSelector-0").change(optionSelection);var suscribeVar=$(".product-form-quickview #SingleOptionSelector-0 ").val();suscribeVar==="Compra \xFAnica"?($(".product-form-quickview .suscription-hide").hide(),$(".product-form-quickview #0semanas").prop("checked",!0),$(".product-form-quickview #2semanas").prop("checked",!1),disccountRemove()):suscribeVar==="Suscripci\xF3n"&&($(".product-form-quickview .suscription-hide").show(),$(".product-form-quickview #0semanas").prop("checked",!1),$(".product-form-quickview #2semanas").prop("checked",!0),disccount()),console.log(suscribeVar),$(".product-form-quickview #SingleOptionSelector-2").val()==="Molido medio"&&$(".product-form-quickview #SingleOptionSelector-2").parent(".selector-wrapper").append('<small class="block__warning">Ideal para cafetera y prensa francesa</small>');var molidoSelected=function(){var val=$(this).val();console.log(val),val==="Molido medio"?$(this).parent(".selector-wrapper").append('<small class="block__warning">Ideal para cafetera y prensa francesa</small>'):$(".product-form-quickview .block__warning").remove()};$(".product-form-quickview #SingleOptionSelector-2").change(molidoSelected);var checkTime=function(){var checkValue=$(this).val();$(".product-form-quickview #propertie-hide-value").val(checkValue),console.log(checkValue)};$(".product-form-quickview .check-time-recurrencie input").on("change",checkTime)}$(document).on("click",".js-open-quickview",function(e){if($(window).width()>767){e.preventDefault();var href=$(this).attr("href");$("#gp-popup-quickview .quickview-popup-content").html(""),$("#gp-popup-quickview").removeClass("loaded"),$.magnificPopup.open({items:{src:"#gp-popup-quickview"},type:"inline",mainClass:"modal_quickview_popup mfp-fade",removalDelay:300}),$.ajax({method:"GET",url:href,data:{view:"quickview"},xhrFields:{withCredentials:!0},dataType:"html",success:function(response){var pHtml=$(response).find(".product-quickview-container").first().html();$("#gp-popup-quickview .quickview-popup-content").html(pHtml),initQuickviewJs()}})}});var soldOutText="Agotado";soldOutText==""&&(soldOutText="Sold out");var selectOptionText="Select options";selectOptionText==""&&(selectOptionText="Select options");var addToCartText="A\xF1adir al carrito";addToCartText==""&&(addToCartText="Add to cart");function showHideCompare(isShow){$(".compare-wrapper").length&&(isShow?($(".compare-wrapper").show(),$(".compare-wrapper-empty").hide()):($(".compare-wrapper").hide(),$(".compare-wrapper-empty").show()))}function addProductHtmlToPopup(product){var pRemove='<td data-compare-handle="'+product.handle+'"><a href="#" class="btn-remove-compare" data-product-handle="'+product.handle+'"></a></td>',pImage='<td data-compare-handle="'+product.handle+'"><div class="image"><a href="'+product.url+'" class="hover-change-img lazyload-parent">';product.featured_image&&(pImage+='<img src="'+product.featured_image+'" alt="'+product.title+'"/>'),product.images.size>1&&(pImage+='<img src="'+product.images[1]+'" alt="'+product.title+'"/>'),pImage+="</a></div></td>";var pPrice='<td data-compare-handle="'+product.handle+'">';product.compare_at_price>product.price?pPrice+='<dl class="price price--on-sale" data-price="">':pPrice+='<dl class="price" data-price="">',product.compare_at_price>product.price?pPrice+='<div class="price__regular"><dd><span class="price-item price-item--regular" data-regular-price><span class="money">'+Shopify.formatMoney(product.compare_at_price)+"</span></span></dd></div>":pPrice+='<div class="price__regular"><dd><span class="price-item price-item--regular" data-regular-price><span class="money">'+Shopify.formatMoney(product.price)+"</span></span></dd></div>",pPrice+='<div class="price__sale"><dd><span class="price-item price-item--sale" data-sale-price><span class="money">'+Shopify.formatMoney(product.price)+"</span></span></dd></div>",pPrice+="</dl></td>";var pTitle='<td data-compare-handle="'+product.handle+'"><a href="'+product.url+'">'+product.title+"</a></td>",pType='<td data-compare-handle="'+product.handle+'"><span>-</span></td>';product.type&&(pType='<td data-compare-handle="'+product.handle+'"><span>'+product.type+"</span></td>");var pVendor='<td data-compare-handle="'+product.handle+'"><span>-</span></td>';product.vendor&&(pVendor='<td data-compare-handle="'+product.handle+'"><span>'+product.vendor+"</span></td>"),$("tr.compare-remove").append(pRemove),$("tr.compare-image").append(pImage),$("tr.compare-title").append(pTitle),$("tr.compare-price").append(pPrice),$("tr.compare-type").append(pType),$("tr.compare-vendor").append(pVendor)}function showComparePopup(){$.magnificPopup.open({items:{src:"#gp-popup-compare"},type:"inline",mainClass:"modal_compare_popup mfp-fade",removalDelay:300})}var compareProducts=[];typeof Storage<"u"?(localStorage.getItem("compareList")&&(Cookies2.get("compare-expire")===void 0?localStorage.removeItem("compareList"):compareProducts=$.parseJSON(localStorage.getItem("compareList"))),$(document).on("click",".btn-remove-compare",function(e){e.preventDefault();var handle=$(this).data("product-handle");if(compareProducts.length){$('.gp-popup-compare td[data-compare-handle="'+handle+'"]').remove();for(var i2=0;i2<compareProducts.length;i2++)if(handle==compareProducts[i2]){compareProducts.splice(i2,1);break}compareProducts.length||showHideCompare(!1),localStorage.setItem("compareList",JSON.stringify(compareProducts)),Cookies2.set("compare-expire",1,1)}}),$(document).on("click",".my-account-link .link.compare a",function(e){if(e.preventDefault(),showComparePopup(),compareProducts.length){$(".gp-popup-compare .compare-popup-content td").remove();for(var i2=0;i2<compareProducts.length;i2++)$.getJSON("/products/"+compareProducts[i2]+".js",function(product){addProductHtmlToPopup(product),Currency.convertAll(defaultCurrency,Currency.currentCurrency)});showHideCompare(!0)}else showHideCompare(!1)}),$(document).on("click",".btn-compared",function(e){e.preventDefault();var handle=$(this).data("product-handle");if(handle&&handle!=""){for(var inArray=!1,i2=0;i2<compareProducts.length;i2++)if(handle==compareProducts[i2]){inArray=!0;break}if(inArray||compareProducts.unshift(handle),showComparePopup(),compareProducts.length){$(".gp-popup-compare .compare-popup-content td").remove();for(var i2=0;i2<compareProducts.length;i2++)$.getJSON("/products/"+compareProducts[i2]+".js",function(product){addProductHtmlToPopup(product),Currency.convertAll(defaultCurrency,Currency.currentCurrency)});showHideCompare(!0)}else showHideCompare(!1);localStorage.setItem("compareList",JSON.stringify(compareProducts)),Cookies2.set("compare-expire",1,1)}})):Console.log("No Web Storage support.."),$(document).on("click touch",function(e){var container=$(".wishlist-slideout"),container2=$(".btn-wishlist"),container3=$(".my-account-link .link.wishlist a");!container.is(e.target)&&container.has(e.target).length===0&&!container2.is(e.target)&&container2.has(e.target).length===0&&e.target.className!="btn-remove-wishlist"&&!container3.is(e.target)&&container3.has(e.target).length===0&&e.target.className!=".my-account-link .link.wishlist a"&&($(".wishlist-slideout").removeClass("active"),$(".wishlist-slideout-container").removeClass("active"))});function showHideWishlist(isShow){isShow?($(".wishlist-items-wrapper").show(),$(".wishlist-items-empty").hide()):($(".wishlist-items-wrapper").hide(),$(".wishlist-items-empty").show())}function addProductHtmlToWishlist(product){var pRemove='<a href="#" class="btn-remove-wishlist" data-product-handle="'+product.handle+'"></a>',pImage='<div class="image"><a href="'+product.url+'"><img src="'+product.featured_image+'"/></a></div>',pTitle='<div class="product-item-name"><a href="'+product.url+'">'+product.title+"</a></div>",pPrice='<td data-compare-handle="'+product.handle+'">';product.compare_at_price>product.price?pPrice+='<dl class="price price--on-sale" data-price="">':pPrice+='<dl class="price" data-price="">',product.compare_at_price>product.price?pPrice+='<div class="price__regular"><dd><span class="price-item price-item--regular" data-regular-price><span class=money>'+Shopify.formatMoney(product.compare_at_price)+"</span></span></dd></div>":pPrice+='<div class="price__regular"><dd><span class="price-item price-item--regular" data-regular-price><span class=money>'+Shopify.formatMoney(product.price)+"</span></span></dd></div>",pPrice+='<div class="price__sale"><dd><span class="price-item price-item--sale" data-sale-price><span class=money>'+Shopify.formatMoney(product.price)+"</span></span></dd></div>",pPrice+="</dl></td>";var pButton="";if(product.available){var variants=product.variants;variants.size>1?pButton='<a href="'+product.url+'" class="btn btn-select-option js-open-quickview">'+selectOptionText+"</a>":pButton='<a href="'+product.url+'" class="btn btn-add-to-cart" data-vid="'+variants[0].id+'">'+addToCartText+"</a>"}else pButton='<a href="'+product.url+'" class="btn btn-soldout">'+soldOutText+"</a>";var itemHtml='<li class="product-item" data-product-handle="'+product.handle+'"><div class="product">'+pImage+'<div class="product-item-details">'+pTitle+pPrice+'<div class="product-buttons">'+pButton+pRemove+"</div></div></div></li>";$(".wishlist-items-wrapper .wishlist-items").append(itemHtml)}function removeProductFromWishlist(handle,wishlistProducts2){var btnWishlist2=$('.btn-wishlist[data-product-handle="'+handle+'"]');if(btnWishlist2&&btnWishlist2.removeClass("added").attr("title",btnWishlist2.data("wishlist-add")),wishlistProducts2.length){$('.wishlist-slideout .product-item[data-product-handle="'+handle+'"]').remove();for(var i2=0;i2<wishlistProducts2.length;i2++)if(handle==wishlistProducts2[i2]){wishlistProducts2.splice(i2,1);break}wishlistProducts2.length||showHideWishlist(!1),localStorage.setItem("wishlistList",JSON.stringify(wishlistProducts2)),Cookies2.set("wishlist-expire",1,1)}}var wishlistProducts=[];if(typeof Storage<"u"){if(localStorage.getItem("wishlistList"))if(Cookies2.get("wishlist-expire")===void 0?localStorage.removeItem("wishlistList"):wishlistProducts=$.parseJSON(localStorage.getItem("wishlistList")),wishlistProducts.length){for(var i=0;i<wishlistProducts.length;i++){var btnWishlist=$('.btn-wishlist[data-product-handle="'+wishlistProducts[i]+'"]');btnWishlist&&btnWishlist.addClass("added").attr("title",btnWishlist.data("wishlist-added"))}showHideWishlist(!0)}else showHideWishlist(!1);else showHideWishlist(!1);$(document).on("click",".btn-wishlist-close",function(e){$(".wishlist-slideout").removeClass("active"),$(".wishlist-slideout-container").removeClass("active")}),$(document).on("click",".btn-remove-wishlist",function(e){e.preventDefault();var handle=$(this).data("product-handle");removeProductFromWishlist(handle,wishlistProducts)}),$(document).on("click",".my-account-link .link.wishlist a",function(e){if(e.preventDefault(),$(".wishlist-slideout").addClass("active"),$(".wishlist-slideout-container").addClass("active"),wishlistProducts.length){$(".btn-wishlist").addClass("loading"),$(".wishlist-slideout").addClass("loading"),$(".wishlist-slideout .wishlist-items .product-item").remove();for(var cnt=0,i2=0;i2<wishlistProducts.length;i2++)$.getJSON("/products/"+wishlistProducts[i2]+".js",function(product){cnt++,addProductHtmlToWishlist(product),(cnt=wishlistProducts.length)&&($(".btn-wishlist").removeClass("loading"),$(".wishlist-slideout").removeClass("loading")),Currency.convertAll(defaultCurrency,Currency.currentCurrency)});showHideWishlist(!0)}else showHideWishlist(!1)}),$(document).on("click",".btn-wishlist",function(e){e.preventDefault();var handle=$(this).data("product-handle");if($(this).hasClass("added"))removeProductFromWishlist(handle,wishlistProducts);else{for(var inArray=!1,i2=0;i2<wishlistProducts.length;i2++)if(handle==wishlistProducts[i2]){inArray=!0;break}if(inArray||wishlistProducts.unshift(handle),wishlistProducts.length){$(".btn-wishlist").addClass("loading"),$(".wishlist-slideout").addClass("loading"),$(".wishlist-slideout .wishlist-items .product-item").remove();for(var cnt=0,i2=0;i2<wishlistProducts.length;i2++)$.getJSON("/products/"+wishlistProducts[i2]+".js",function(product){cnt++,addProductHtmlToWishlist(product),(cnt=wishlistProducts.length)&&($(".btn-wishlist").removeClass("loading"),$(".wishlist-slideout").removeClass("loading")),Currency.convertAll(defaultCurrency,Currency.currentCurrency)});showHideWishlist(!0)}else showHideWishlist(!1);var btnWishlist2=$('.btn-wishlist[data-product-handle="'+handle+'"]');btnWishlist2&&btnWishlist2.addClass("added").attr("title",btnWishlist2.data("wishlist-added")),localStorage.setItem("wishlistList",JSON.stringify(wishlistProducts)),Cookies2.set("wishlist-expire",1,1),$(".wishlist-slideout").addClass("active"),$(".wishlist-slideout-container").addClass("active")}})}else Console.log("No Web Storage support..");$(document).on("click",".product-card-item .product-item-details .color-swatch .swatch",function(e){e.preventDefault(),$(this).siblings().removeClass("active"),$(this).addClass("active");var vImageUrl=$(this).data("variant-image");if(vImageUrl&&vImageUrl!=""){var pImage=$(this).closest(".product-card-item").find(".image .hover-change-img img");pImage.length&&pImage.first().attr("src",vImageUrl)}}),$(document).on("click",".js-toggle-filter",function(e){e.preventDefault(),$(this).toggleClass("active"),$(".gp-collection-filter-wrapper").toggleClass("active")}),$(document).on("click",".mobile-close-filter-slideout",function(){$(".js-toggle-filter").removeClass("active"),$(".gp-collection-filter-wrapper").removeClass("active")}),$(document).on("click",function(e){var container=$(".gp-collection-filter-wrapper"),container2=$(".filter-title.js-toggle-filter");!container.is(e.target)&&container.has(e.target).length===0&&!container2.is(e.target)&&container2.has(e.target).length===0&&($(".filter-title.js-toggle-filter").removeClass("active"),$(".gp-collection-filter-wrapper").removeClass("active"))}),$(document).on("click",".js-toggle-linklist",function(){$(this).toggleClass("active"),$(this).next().slideToggle(300)});function sortBy(obj,type,value){var queryParams={};if(location.search.length)for(var aKeyValue,i2=0,aCouples=location.search.substr(1).split("&");i2<aCouples.length;i2++)aKeyValue=aCouples[i2].split("="),aKeyValue.length>1&&(queryParams[decodeURIComponent(aKeyValue[0])]=decodeURIComponent(aKeyValue[1]));queryParams.sort_by=value;var url=location.pathname+"?"+$.param(queryParams).replace(/%2B/g,"+");window.history.pushState({param:queryParams},url,url),$.ajax({type:"get",url,beforeSend:function(){$(".gp-collection-filter-wrapper .ajax-loader").show(),$(".gp-collection .gp-products .ajax-loader").show()},success:function(data2){$(".sort-by li a").length&&($(".sort-by li a").removeClass("active"),$(obj).addClass("active")),$(".gp-collection-filter-wrapper .ajax-loader").hide(),$(".gp-collection .gp-products .ajax-loader").hide();var currentList=$(".gp-collection .gp-products .gp-products-inner"),productList=$(data2).find(".gp-collection .gp-products .gp-products-inner");currentList.length&&productList.length&&currentList.replaceWith(productList);var newPagination=$(data2).find(".gp-collection-pagination");newPagination.length?$(".gp-collection-pagination").html(newPagination.html()):$(".gp-collection-pagination").html()},error:function(xhr,text){$(".gp-collection-filter-wrapper .ajax-loader").hide(),$(".gp-collection .gp-products .ajax-loader").hide()}})}$(document).on("click",".sort-by li a",function(e){e.preventDefault(),sortBy(this,"list",$(this).data("sort"))}),$(document).on("change",".sort-by select",function(e){sortBy(this,"select",$(this).val())});var viewMode=sessionStorage.getItem("current-view-mode");viewMode&&$(".gp-products .product-card-grid").length&&$(".gp-products .product-card-list").length&&(viewMode=="list"?($(".gp-products .product-card-grid").hide(),$(".gp-products .product-card-list").show(),$(".gp-products").removeClass("viewing-grid"),$(".gp-products").addClass("viewing-list"),$(".gp-view-mode .gp-view-mode-item").removeClass("active"),$(".gp-view-mode .gp-view-mode-item.gp-view-mode-list").addClass("active")):($(".gp-products .product-card-list").hide(),$(".gp-products .product-card-grid").show(),$(".gp-products").removeClass("viewing-list"),$(".gp-products").addClass("viewing-grid"),$(".gp-view-mode .gp-view-mode-item").removeClass("active"),$(".gp-view-mode .gp-view-mode-item.gp-view-mode-grid").addClass("active"))),$(document).on("click",".gp-view-mode .gp-view-mode-item",function(e){e.preventDefault(),$(this).hasClass("active")||($(".gp-view-mode .gp-view-mode-item").removeClass("active"),$(this).addClass("active"),$(".gp-products .product-card-grid").length&&$(".gp-products .product-card-list").length&&($(this).hasClass("gp-view-mode-list")?($(".gp-products .product-card-grid").slideUp(),$(".gp-products .product-card-list").slideDown(),$(".gp-products").removeClass("viewing-grid"),$(".gp-products").addClass("viewing-list"),sessionStorage.setItem("current-view-mode","list")):($(".gp-products .product-card-list").slideUp(),$(".gp-products .product-card-grid").slideDown(),$(".gp-products").removeClass("viewing-list"),$(".gp-products").addClass("viewing-grid"),sessionStorage.setItem("current-view-mode","grid"))))}),$(document).on("click",".gp-pagination-loadmore a",function(e){var current_btn=$(this),url=current_btn.attr("href");$.ajax({type:"get",url,beforeSend:function(){current_btn.addClass("ajax-loader-btn")},success:function(data2){current_btn.removeClass("ajax-loader-btn");var currentList=$(".gp-products .gp-products-inner"),newList=$(data2).find(".gp-products .gp-products-inner");currentList.length&&newList.length&&currentList.append(newList.html());var newPagination=$(data2).find(".gp-collection-pagination");newPagination.length?$(".gp-collection-pagination").html(newPagination.html()):$(".gp-collection-pagination").html()},error:function(xhr,text){current_btn.removeClass("ajax-loader-btn")}}),e.preventDefault()}),$(document).on("click",".gp-product-detail .gp-swatch .option-item",function(e){e.preventDefault();var option=$(this).data("option"),value=$(this).data("value");value&&($(this).closest("form").find('select[data-option="'+option+'"]').val(value).change(),$(this).siblings().removeClass("selected"),$(this).addClass("selected"))}),$(document).on("click",".product-detail-infomation .product-data-items-menu .tab-title a",function(e){e.preventDefault();var parent=$(this).parent();if(!parent.hasClass("active")){var id=$(this).attr("href");parent.siblings().removeClass("active"),parent.addClass("active"),$(".gp-product-col-information .product-data-items-content .tab-content").removeClass("active"),$(id).addClass("active")}}),$(document).on("click",".product-detail-infomation .product-data-items-content .tab-title a",function(e){e.preventDefault();var parent=$(this).parent(),id=$(this).attr("href");parent.toggleClass("active"),$(id).toggleClass("active")}),$(document).on("click",".edit-qty",function(e){if(e.preventDefault(),$(this).hasClass("minus")){var qty=parseInt($(this).next().val());qty>1?(qty=qty-1,$(this).next().val(qty)):$(this).next().val(1)}else{var qty=parseInt($(this).prev().val());qty?$(this).prev().val(qty+1):$(this).prev().val(1)}}),$(document).on("click",".nav-tabs li a",function(e){e.preventDefault();var href=$(this).attr("href");$(this).parent().siblings().removeClass("active"),$(this).parent().addClass("active"),$(".tab-pane"+href).siblings().removeClass("active"),$(".tab-pane"+href).addClass("active"),$(".tab-pane"+href).find(".slick-slider").slick("setPosition")}),$(document).on("change",".mobile-tab select",function(){var val=$(this).val();$(".tab-pane"+val).siblings().removeClass("active"),$(".tab-pane"+val).addClass("active"),$(".tab-pane"+val).find(".slick-slider").slick("setPosition")}),$(window).scrollTop()>20?$(".scroll-to-top").removeClass("hidden"):$(".scroll-to-top").addClass("hidden"),$(window).scroll(function(){$(this).scrollTop()>20?$(".scroll-to-top").removeClass("hidden"):$(".scroll-to-top").addClass("hidden")}),$(document).on("click",".scroll-to-top",function(){return $("html, body").animate({scrollTop:"0px"},800),!1}),$(document).on("change",".gp-product-detail .single-option-selector",function(e){var variant_options=[];$(".gp-product-detail .single-option-selector").each(function(e2){variant_options.push($(this).val())});var current_variant="";variant_options.length>0&&(current_variant=variant_options.join(" / ")),$("select.product-form__variants option").each(function(e2){var variant_title=$(this).text().trim();if(variant_title==current_variant){var image=$(this).data("variant-image"),current_img=$("#gp-media-main-slider .slick-current img").data("src");return current_img!=image&&$("#gp-media-main-slider .slick-slide img").each(function(e3){var slide_img=$(this).data("src");if(slide_img==image){var index=$(this).closest(".slick-slide").data("slick-index");$("#gp-media-main-slider").slick("slickGoTo",index)}}),!1}})}),$(document).on("change",".gp-popup-quickview .gp-product-detail .single-option-selector",function(e){var variant_options=[];$(".gp-popup-quickview .gp-product-detail .single-option-selector").each(function(e2){variant_options.push($(this).val())});var current_variant="";variant_options.length>0&&(current_variant=variant_options.join(" / ")),$(".gp-popup-quickview select.product-form__variants option").each(function(e2){var variant_title=$(this).text().trim();if(variant_title==current_variant){var image=$(this).data("variant-image"),current_img=$(".gp-popup-quickview .owl-carousel .owl-item.active img").attr("src");return current_img!=image&&$(".gp-popup-quickview  .owl-carousel .owl-item img").each(function(e3){var slide_img=$(this).attr("src");if(slide_img==image){var index=parseInt($(this).parent().data("position"))-1;$(".gp-popup-quickview .owl-carousel").trigger("to.owl.carousel",index)}}),!1}})})});
//# sourceMappingURL=/cdn/shop/t/15/assets/gps-custom.js.map?v=7838596523444379001668643925
